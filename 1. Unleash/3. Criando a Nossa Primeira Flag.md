# Resumo da Aula: Configuração e Gerenciamento de Feature Flags no Unleash

## Introdução
A aula foca na configuração prática e no gerenciamento de Feature Flags no Unleash, após sua instalação local na aula anterior. O professor explora a interface do Unleash, detalhando como criar e gerenciar flags no projeto padrão (default), as limitações da versão open-source em relação a projetos e ambientes, e as opções de segmentação, como rollout gradual e constraints baseadas em contexto. A aula também prepara o terreno para a próxima etapa, que envolverá a integração com uma aplicação real.

## Conteúdo Principal

### Estrutura do Unleash
- **Projetos**: Na versão open-source, o Unleash oferece apenas o projeto "default", que contém todas as Feature Flags. Na versão Enterprise, é possível criar múltiplos projetos para segmentar acesso por equipes (ex.: Payments, Security, SRE), melhorando a governança e segurança.
- **Limitações da versão open-source**: A criação de novos projetos e ambientes adicionais é exclusiva do plano pago (Enterprise), que oferece recursos como SSO, RBAC e projetos/environments ilimitados. A versão gratuita suporta apenas os ambientes "Development" e "Production".
- **Solução alternativa**: Para contornar a limitação de projetos, é possível rodar múltiplas instâncias do Unleash (ex.: uma para Payments, outra para Security), mas isso aumenta a complexidade de gerenciamento.

### Criação de uma Feature Flag
- **Passo a passo**:
  - No projeto default, o professor cria uma flag chamada `login_page` com a descrição "Controle de exibição da nova tela de login".
  - A flag é configurada como tipo **Release** (padrão), voltada para lançamentos. Outros tipos disponíveis incluem Experiment, Operational, Kill Switch e Permission, mas Release é o foco.
  - Tags (ex.: "login") podem ser adicionadas para organização, e a descrição é uma boa prática para evitar confusão.
- **Ambientes**: A flag pode ser habilitada/desabilitada separadamente nos ambientes Development e Production. Alterações em Production geram alertas devido ao impacto direto nos usuários.
- **Impression Data**: Desativado por padrão, esse recurso coleta métricas sobre o desempenho da flag, mas não é explorado nesta aula.

### Estratégias de Rollout
- **Standard**: A flag é ativada (true) ou desativada (false) para todos os usuários, sem segmentação. Ideal para cenários simples de ativação total ou nenhuma.
- **Gradual Rollout**: Permite liberar a flag para uma porcentagem específica de usuários (ex.: 10%, 25%, 50%). O Unleash gerencia a distribuição, aliviando a aplicação dessa responsabilidade.
- **Constraints (Restrições)**:
  - Permitem segmentação baseada em campos de contexto, como `userId` ou `groupId`. Exemplo: a flag `login_page` foi configurada para ativar apenas para `userId` 1, 2 ou 3.
  - Constraints usam lógica AND (todas as condições devem ser atendidas). A aplicação deve passar o campo de contexto na requisição para validação pelo Unleash.
- **Context Fields**: Campos personalizados (ex.: `groupId`) podem ser criados para segmentação específica. A aplicação passa esses campos na requisição, e o Unleash valida se a flag deve ser ativada.

### Configurações Adicionais
- **Environments**: A versão open-source limita a dois ambientes (Development e Production), suficientes para a maioria dos casos (ex.: Development como staging). Ambientes extras requerem o plano pago.
- **Ciclo de Vida**: É possível definir um tempo de vida para a flag, após o qual ela expira automaticamente, ajudando a manter o código limpo.
- **Integração**: O Unleash fornece exemplos de requisições (mostrados na interface) para verificar o estado de uma flag, retornando `true` ou `false` com base nas configurações.

### Próximos Passos
- A próxima aula criará uma aplicação simples em Node.js para integrar com o Unleash, demonstrando como a aplicação consulta o estado de uma Feature Flag e como estratégias como rollout gradual e constraints funcionam na prática.

## Conclusão
A aula detalha a interface do Unleash e o processo de criação e configuração de Feature Flags, destacando as diferenças entre as versões open-source e Enterprise. O professor demonstra como criar uma flag, configurar estratégias de rollout (Standard e Gradual) e usar constraints para segmentação granular. A limitação a um projeto default na versão gratuita é discutida, com alternativas para governança. A aula estabelece uma base sólida para a integração prática com uma aplicação, que será abordada na próxima aula, reforçando a utilidade do Unleash no controle de funcionalidades.